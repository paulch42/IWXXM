openapi: "3.1.0"
info:
  title: IWXXM METAR/SPECI Model
  version: "1.0"
  description: |
    METAR and SPECI reporting constructs as defined in ICAO Annex 3 and PANS-MET (Doc 10157).

    METAR and SPECI reports include identical information but are issued for different purposes.

components:
  schemas:
    METAR:
      description: A routine observation made at an aerodrome throughout the day.  METAR observations are made (and distributed) at intervals of one hour or, if so determined by regional air navigation agreement, at intervals of one half-hour.
      oneOf:
        - $ref: "#/components/schemas/MeteorologicalAerodromeObservationReport"

    SPECI:
      description: A special (i.e., non-routine) observation made at an aerodrome as needed. SPECI observations are made (and distributed) in accordance with criteria established by the meteorological authority, in consultation with the appropriate ATS authority, operators and others concerned.
      oneOf:
        - $ref: "#/components/schemas/MeteorologicalAerodromeObservationReport"

    MeteorologicalAerodromeObservationReport:
      allOf:
        - $ref: "../Common/Report.yaml#/components/schemas/Report"
        - type: object
          description: A model of an aerodrome observation report.
          required:
            - issueTime
            - aerodrome
            - observationTime
          properties:
            issueTime:
              $ref: "../GML/GML.yaml#/components/schemas/TimeInstant"
            aerodrome:
              $ref: "../AIXM/AIXM.yaml#/components/schemas/AirportHeliport"
            observationTime:
              $ref: "../GML/GML.yaml#/components/schemas/TimeInstant"
            observation:
              $ref: "Observation.yaml#/components/schemas/MeteorologicalAerodromeObservation"
            trendForecast:
              type: array
              uniqueItems: true
              items:
                $ref: "Trend_Forecast.yaml#/components/schemas/MeteorologicalAerodromeTrendForecast"
            automatedStation:
              type: string
              enum: ["AUTO"]
