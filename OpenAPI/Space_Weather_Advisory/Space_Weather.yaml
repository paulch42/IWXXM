openapi: "3.1.0"
info:
  title: IWXXM Space Weather Model
  version: "1.0"
  description: |
    An OpenAPI model of the IWXXM Space Weather diagram.

components:
  schemas:
    SpaceWeatherAdvisory:
      description: An advisory of space weather conditions of significance to aviation as represented in ICAO Annex 3 and PANS-MET (Doc 10157).
      allOf:
        - $ref: "../Common/Report.yaml#/components/schemas/Report"
        - type: object
          required:
            - issueTime
            - issuingSpaceWeatherCentre
          properties:
            issueTime:
              description: The time at which this report was issued.
              $ref: "../GML/GML.yaml#/components/schemas/TimeInstant"
            issuingSpaceWeatherCentre:
              description: The issuing space weather centre (SWXC).
              $ref: "../AIXM/AIXM.yaml#/components/schemas/Unit"
            advisoryNumber:
              description: Advisory number - four digit year and unique message number.
              $ref: "../Common/String.yaml#/components/schemas/StringWithNilReason"
            replacedAdvisoryNumber:
              description: The number of the advisory being replaced.
              type: array
              maxItems: 4
              uniqueItems: true
              items:
                $ref: "../Common/String.yaml#/components/schemas/CharacterString"
            effect:
              description: Space weather effect.
              type: array
              uniqueItems: true
              items:
                $ref: "#/components/schemas/SpaceWeatherEffect"
            analysis:
              description: Observed and forecast space weather information.
              type: array
              maxItems: 5
              uniqueItems: true
              items:
                $ref: "Space_Weather_Analysis.yaml#/components/schemas/SpaceWeatherAnalysis"
            remarks:
              description: Remarks, as necessary.
              $ref: "../Common/String.yaml#/components/schemas/StringWithNilReason"
            nextAdvisoryTime:
              $ref: "../GML/GML.yaml#/components/schemas/TimeInstant"

    SpaceWeatherEffect:
      description: Effect of the space weather phenomena.
      type: string
      enum: ["HF_COM", "SATCOM", "GNSS", "RADIATION"]
